---
layout: post
title:	"Coq 02 - ìì—°ìˆ˜ ë§ì…ˆì˜ ê²°í•©ë²•ì¹™ ì¦ëª…"
date:	2018-01-08 02:24:01
author: nyan101
categories: ì „ì‚°
tags:	Coq
use_math : true
---


ëŒ€ë¶€ë¶„ì˜ referenceê°€ ê·¸ë ‡ë“¯ì´ ì½ë‹¤ë³´ë©´ ì‰½ê²Œ ì§€ë£¨í•´ì§„ë‹¤. ì§€ë£¨í•¨ì„ ëœí•˜ê³  Coqì— ìµìˆ™í•´ì§€ê¸° ìœ„í•´ ì¼ë‹¨ ì˜ˆì œë¥¼ ì¡°ê¸ˆì”© ë”°ë¼í•´ë³´ë©´ì„œ ìµí˜€ê°€ê¸°ë¡œ í–ˆë‹¤. ìë°”ë¥¼ ì²˜ìŒ ë°°ìš¸ ë•Œ *public static void main(int argv, char **argc)*ê°€ ì •í™•íˆ ë­”ì§€ëŠ” ëª°ë¼ë„ "Hello World" ë¶€í„° ì°ì–´ë³´ëŠ” ê·¸ëŸ° ë§ˆìŒìœ¼ë¡œ ì§„í–‰í•´ë´¤ë‹¤.



## CoqIDE ì‹¤í–‰

í”„ë¡œê·¸ë¨ì„ ì²˜ìŒ ì‹¤í–‰í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ í™”ë©´ì„ ë³¼ ìˆ˜ ìˆë‹¤. í¬ê²Œ 3ê°€ì§€ ì°½ìœ¼ë¡œ ë‚˜ë‰˜ì–´ì ¸ ìˆìœ¼ë©°, ì™¼ìª½ì€ ì½”ë“œ ì‘ì„±ì„, ì˜¤ë¥¸ìª½ ìœ„/ì•„ë˜ëŠ” ê°ê° Proof ë³´ì¡°/ê²°ê³¼ ì¶œë ¥ì„ ë‹´ë‹¹í•˜ëŠ” ì—­í• ì´ì—ˆë‹¤.

![coqIDE](/assets/images/2018/01/coq02_coqIDE.png)



## ìì—°ìˆ˜ ì§‘í•© mynat ì •ì˜

ì´ì œ ìì—°ìˆ˜ ì§‘í•©ì„ ì •ì˜í•´ë³´ì. ì‚¬ì‹¤ Coqì—ì„œëŠ” ì´ë¯¸ natì´ë¼ëŠ” í˜•íƒœë¡œ ìì—°ìˆ˜ë¥¼ ì œê³µí•˜ì§€ë§Œ, ì—¬ê¸°ì„œëŠ” mynatì´ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ì²˜ìŒë¶€í„° ì •ì˜í•´ë‚˜ê°€ê¸°ë¡œ í•˜ì. ìì—°ìˆ˜ ì§‘í•©ì€ ì•„ë˜ì™€ ê°™ì´ Inductiveí•˜ê²Œ ì •ì˜í•  ìˆ˜ ìˆë‹¤.

```Coq
Inductive mynat : Set :=
 | O : mynat
 | Succ : mynat->mynat.
```

ìœ„ ì½”ë“œë¥¼ í•œì¤„ì”© ì‚´í´ë³´ì

* `Inductive mynat : Set :=` "mynatì´ë¼ëŠ” ì§‘í•©(Set)ì„ Inductiveí•˜ê²Œ ì •ì˜í•˜ì"

* `O : mynat` "O(ìˆ«ì 0ì´ ì•„ë‹Œ ì•ŒíŒŒë²³ Oì„ì— ìœ ì˜)ì€ mynatì— ì†í•œë‹¤"

* `Succ : mynat->mynat` "Succì€ mynat ì—ì„œ mynatìœ¼ë¡œ ê°€ëŠ” í•¨ìˆ˜ì´ë‹¤."

  ğŸ¡’ ì–´ë–¤ xê°€ mynatì— ì†í•œë‹¤ë©´, (Succ x) ë„ mynatì˜ ì›ì†Œì´ë‹¤.

Coqì˜ ëª¨ë“  statementëŠ” .(period)ìœ¼ë¡œ ëë‚œë‹¤ëŠ” ì ì— ìœ ì˜í•´ì•¼ í•œë‹¤.

ì—¬ê¸°ì„œ Succ í•¨ìˆ˜ëŠ” ë³´í†µ "ë‹¤ìŒ ìì—°ìˆ˜ë¥¼ ì œê³µí•˜ëŠ” í•¨ìˆ˜"ë¡œ í•´ì„í•´ `(Succ 0) = 1`, `(Succ 1) = 2`, ... ë“±ìœ¼ë¡œ í•´ì„ë˜ì§€ë§Œ ì´ëŠ” ë°˜ëŒ€ë¡œ ì´í•´í•´ì•¼ í•œë‹¤. ì½”ë“œì˜ Succ ì •ì˜ë¡œë¶€í„° ì•Œ ìˆ˜ ìˆëŠ” ì‚¬ì‹¤ì€ ì˜¤ì§ **"xê°€ mynatì¼ ë•Œ (Succ x)ë„ mynatì´ë‹¤"**ë¼ëŠ” ì ì¼ ë¿ ìì—°ìˆ˜ë“¤ ì‚¬ì´ì˜ ìˆœì„œì— ëŒ€í•´ì„œëŠ” ë§í•˜ì§€ ì•Šì•˜ë‹¤. ì˜¤íˆë ¤ 1, 2, 3ì„ ê°ê° `(Succ O)`, `(Succ 1)`(í˜¹ì€ `(Succ (Succ O))`), `(Succ (Succ (Succ O)))`ì„ ë‚˜íƒ€ë‚´ëŠ” syntactic sugarë¼ê³  ë°›ì•„ë“¤ì´ëŠ” í¸ì´ ë” ì ì ˆí•˜ë‹¤.

ì—¬ê¸°ê¹Œì§€ ì‹¤í–‰ì‹œí‚¤ë©´ ì˜¤ë¥¸ìª½ ì•„ë˜ ì°½ì— ë‹¤ìŒê³¼ ê°™ì€ ì¶œë ¥ì„ ë³¼ ìˆ˜ ìˆë‹¤.

![mynat_definition](/assets/images/2018/01/coq02_mynat_definition.png)

ë¶„ëª… `mynat`ë§Œ ì •ì˜í–ˆëŠ”ë° `mynat_rect`, `mynat_ind`, `mynat_rec`ì´ë¼ëŠ” ê²ƒë“¤ì´ í•¨ê»˜ ì •ì˜ëœ ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤. ì´ëŠ” `Inductive` í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•´ ê·€ë‚©ì ìœ¼ë¡œ mynatì„ ì •ì˜í•œ ê²°ê³¼ì¸ë°, ì ì‹œ í›„ ë§ì…ˆì˜ ê²°í•©ë²•ì¹™ ì¦ëª…ì—ì„œ ì´ë¥¼ ì‚¬ìš©í•  ê²ƒì´ë‹¤.

## mynatì—ì„œì˜ ë§ì…ˆ ì •ì˜

"ë§ì…ˆì˜ ê²°í•©ë²•ì¹™"ì„ ë§í•˜ê¸° ìœ„í•´ì„  ë¨¼ì € ë§ì…ˆì´ ë¬´ì—‡ì¸ì§€ë¶€í„° ì •ì˜í•´ì•¼ í•œë‹¤. ë§ì…ˆì€ mynat ì— ì†í•˜ëŠ” ì¸ì 2ê°œ(a, b)ë¥¼ ë°›ëŠ” í•¨ìˆ˜ë¡œ ë‹¤ìŒê³¼ ê°™ì´ ì •ì˜ë  ìˆ˜ ìˆë‹¤.

```Coq
Definition add (a b : mynat) :=
 match a with
 | O => b
 | Succ c => Succ (add c b)
 end.
```

ì½”ë“œì—ì„œ `match a with ...` ë¶€ë¶„ì„ í’€ì–´ ì“°ë©´ ì•„ë˜ì™€ ê°™ë‹¤. ì•ì„œ Succì˜ í•´ì„ì— ìœ ì˜í•˜ìëŠ” ë§ì„ í–ˆìœ¼ë‚˜ ì—¬ê¸°ì„œëŠ” í¸ì˜ìƒ 'ë‹¤ìŒ ìˆ˜'ë¼ëŠ” ìš©ì–´ë¥¼ ì‚¬ìš©í–ˆë‹¤.

* `0 => b` 0 ê³¼ bë¥¼ ë”í•œ ê²°ê³¼ëŠ” bì´ë‹¤
* `Succ c => Succ (add c b)` aê°€ ì–´ë–¤ mynat (cë¼ê³  í•˜ì)ì˜ 'ë‹¤ìŒ ìˆ˜'ì˜€ë‹¤ë©´ aì™€ bë¥¼ ë”í•œ ê²°ê³¼ëŠ” '(cì™€ bë¥¼ ë”í•œ ê²°ê³¼)ì˜ ë‹¤ìŒ ìˆ˜'ê°€ ëœë‹¤.

ê·¸ëŸ°ë° ì‹¤ì œë¡œ ìœ„ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ë©´ *Error: The reference add was not found in the current environment.* ë¼ëŠ” ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤. addì˜ ì •ì˜ì—ì„œëŠ” ì•„ì§ addê°€ ì •ì˜ë˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì¸ë°, `Definition` ëŒ€ì‹  `Fixpoint`ë¥¼ ì‚¬ìš©í•´ í•´ê²°í•  ìˆ˜ ìˆë‹¤.



## ë§ì…ˆì˜ ê²°í•©ë²•ì¹™ ì¦ëª…

ì´ì œ "ë§ì…ˆì˜ ê²°í•©ë²•ì¹™ì´ë€ ë¬´ì—‡ì¸ê°€"ë¥¼ ì„œìˆ í•˜ëŠ”ë° í•„ìš”í•œ ì¬ë£Œê°€ ëª¨ë‘ ê°–ì¶”ì–´ì¡Œë‹¤. ì•Œë‹¤ì‹œí”¼ ê²°í•©ë²•ì¹™ì€ (a+(b+c))=((a+b)+c) ë¥¼ ì˜ë¯¸í•˜ë©°, ì•„ë˜ ì½”ë“œì— ì´ë¥¼ Theoremìœ¼ë¡œ ì„œìˆ í–ˆë‹¤. ì¦ëª…í•´ì•¼ í•  ë‚´ìš©ì´ ì˜¤ë¥¸ìª½ ìœ„ì— subgoalsë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ë‚˜íƒ€ë‚œ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

![Coq_add_assoc_theorem](/assets/images/2018/01/coq02_add_assoc_theorem.png)

ì´ì œ ì¦ëª…ì„ ì‹œì‘í•˜ì. mynatì— ì†í•˜ëŠ” ëª¨ë“  ì›ì†Œ a b cì— ëŒ€í•´ (a+(b+c))=((a+b)+c)ì„ì„ ë³´ì´ë ¤ë©´ ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œ? ê°€ì¥ ì²˜ìŒì€ mynatì— ì†í•˜ëŠ” a b cê°€ ì£¼ì–´ì¡Œë‹¤ê³  ê°€ì •í•˜ëŠ” ê²ƒì—ì„œ ì‹œì‘í•œë‹¤.

![coq_add_assoc_proof_01](/assets/images/2018/01/coq02_add_assoc_proof_01.png)

ì´ì œ aì— ëŒ€í•´ ìˆ˜í•™ì  ê·€ë‚©ë²•ì„ ì ìš©í•˜ì. ì•ì„œ mynatì„ Inductiveí•˜ê²Œ ì •ì˜í–ˆìœ¼ë¯€ë¡œ CoqëŠ” ì´ë¥¼ ì¸ì‹í•´ ìˆ˜í•™ì  ê·€ë‚©ë²•ì„ ìœ„í•œ í‹€ì„ ì œê³µí•´ì¤€ë‹¤. subgoalsë¥¼ ë³´ì.

![coq_add_assoc_proof_02](/assets/images/2018/01/coq02_add_assoc_proof_02.png)

ì´ì œ subgoalë“¤ì„ í•˜ë‚˜ì”© ë³´ì´ì. `simpl.` ì„ ì‚¬ìš©í•´ ì²« subgoalì„ ê°„ë‹¨íˆ í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ë³€í•œë‹¤.

```Coq
2 subgoal
b : mynat
c : mynat
______________________________________(1/2)
add b c = add b c
______________________________________(2/2)
add (Succ a) (add b c) = add (add (Succ a) b) c
```

~~ë”± ë³´ë©´ ì™¼ìª½ì´ë‘ ì˜¤ë¥¸ìª½ì´ ê°™ì€ë° ì™œ ì•„ì§ ì•ˆ ëë‚¬ì§€~~ `reflexivity.` ë‹¤ì‹œ ë§í•´ x=xëŠ” ì°¸ì´ë¼ëŠ” ì‚¬ì‹¤ì„ ì´ìš©í•˜ì. ê·¸ëŸ¬ë©´ subgoalì´ í•˜ë‚˜ í•´ê²°ë˜ê³  Induction Hypothesisê°€ ì¶”ê°€ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

```Coq
1 subgoals
a : mynat
b : mynat
c : mynat
IHa : add a (add b c) = add (add a b) c
______________________________________(1/1)
add (Succ a) (add b c) = add (add (Succ a) b) c
```

ë‹¤ì‹œ `simpl.`ì„ ì ìš©í•˜ì.

```Coq
1 subgoals
a : mynat
b : mynat
c : mynat
IHa : add a (add b c) = add (add a b) c
______________________________________(1/1)
Succ (add a (add b c)) = Succ (add (add a b) c)
```

subgoalì„ ë³´ë©´ ì–´ë””ì„œ ë§ì´ ~~ê·¸ëŸ¬ë‹ˆê¹Œ IHaê°™ì€ ë°ì„œ~~ ë³¸ í˜•íƒœê°€ ë‚˜íƒ€ë‚¬ë‹¤. `rewrite -> IHa.`ë¥¼ ì´ìš©í•´ IHaì˜ ì¢Œë³€ì„ ëª¨ë‘ ìš°ë³€ìœ¼ë¡œ ë°”ê¿” ì¨ ë³´ì.

```Coq
1 subgoals
a : mynat
b : mynat
c : mynat
IHa : add a (add b c) = add (add a b) c
______________________________________(1/1)
Succ (add (add a b) c) = Succ (add (add a b) c)
```

ì¡°ê¸ˆ ì „ê³¼ ê°™ì´ `reflexivity.`ë¥¼ ì‚¬ìš©í•˜ë©´ *no more subgoals* ë¼ëŠ” ì•ˆë‚´ë¥¼ ë³¼ ìˆ˜ ìˆë‹¤. ì´ì œ `Qed.`ë¡œ ì¦ëª…ì„ ëë‚´ë©´ *add_associativity is defined* ë¼ëŠ” ë©”ì‹œì§€ê°€ ë‚˜ì˜¤ë©´ì„œ ì¦ëª…ì´ ì™„ë£Œëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ì™„ì„±ëœ ì¦ëª…ì„ Printë¡œ ì‚´í´ë³´ì.

![coq02_add_assoc_qed](/assets/images/2018/01/coq02_add_assoc_qed.png)

ì¦ëª… ëŒ€ì‹  `fun` í‚¤ì›Œë“œë¡œ ì‹œì‘í•˜ëŠ” í•¨ìˆ˜ê°€ ë‚˜íƒ€ë‚¬ë‹¤. ì´ëŠ” *í”„ë¡œê·¸ë¨ê³¼ (ê·¸ í”„ë¡œê·¸ë¨ì˜) íƒ€ì… ì‚¬ì´ì˜ ê´€ê³„ëŠ” ì¦ëª…ê³¼ (ê·¸ ì¦ëª…ì´ ì¦ëª…í•˜ëŠ”) ëª…ì œ ì‚¬ì´ì˜ ê´€ê³„ì— ëŒ€ì‘ë  ìˆ˜ ìˆë‹¤* ë¼ëŠ” Curry-Howard isomorphismê³¼ ê´€ë ¨ì´ ìˆë‹¤ê³  í•˜ëŠ”ë°, ì´ì— ëŒ€í•´ì„œëŠ” ì°¨ì°¨ ê³µë¶€í•´ë‚˜ê°€ê¸°ë¡œ í•˜ì.

```python
import numpy as np

np.ndarray([1, 2, 3])
```

